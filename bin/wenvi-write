#!/usr/bin/env python3
import sys
from pathlib import Path
import traceback

sys.path.append(str(Path(__file__).resolve().parent.parent))

from shared.logger import logger
from python.domain.write_form import write_form
from python.domain.utils import display_dialog


def main():
    try:
        if len(sys.argv) < 3:
            raise ValueError("file name not specified")
        file_name = sys.argv[1]
        save = sys.argv[2]
        write_form(file_name, save)
    except Exception as e:
        logger.error(getattr(e, "stack", str(e)))
        logger.error(traceback.format_exc())
        display_dialog(str(e))


if __name__ == "__main__":
    logger.init()
    main()
